# Суть проекта
Процесс перехода между ветками разработки может вызывать ряд
сложностей и проблем, особенно когда это делается на устройстве. Наиболее
распространенные проблемы включают конфликты в базе данных, конфликты
библиотек и бинарных файлов. Чтобы минимизировать потенциальные
проблемы и обеспечить плавный переход между ветками, необходимо
выполнить ряд строго определенных действий, известных как энвилоуп:
- 1. Вызов скрипта `kill.ps1`: Этот шаг включает в себя запуск скрипта, который
завершает все активные процессы, связанные с предыдущей веткой. Этопозволяет избежать конфликтов и ошибок, вызванных оставшимися
запущенными процессами.
- 2. Запуск скрипта `backup-and-restore.cmd`: Этот скрипт выполняет резервное
копирование данных и настроек перед выполнением каких-либо изменений. Это
гарантирует, что все важные данные будут сохранены и могут быть
восстановлены в случае необходимости.
- 3. Обновление базы данных: Выполнение команды `update-db %dbname%`
обновляет базу данных в соответствии с изменениями, внесенными в текущей
ветке. Это важно для синхронизации структуры данных с новой версией кода.
- 4. Очистка и восстановление кэша:
    -Очистка кэша NuGet-пакетов (если это необходимо): Удаляет устаревшие или
ненужные кэшированные пакеты, что может предотвратить конфликты при
последующих сборках.
    -Восстановление кэша NuGet-пакетов (если это необходимо): Обновляет кэш
пакетов до актуального состояния, чтобы обеспечить корректную работу всех
зависимостей.
- 5. Удаление временных файлов:
    - Удаление `node-modules` и/или `package-lock` (если это необходимо):
Удаляет временные файлы, связанные с управлением зависимостями, которые
могут быть неактуальными после переключения веток.
- 6. Установка зависимостей (если это необходимо): Выполнение команды `npm i`
устанавливает все необходимые зависимости, указанные в проекте, и
обеспечивает корректную работу приложения
- 7. Параллельное обновление конфигураций:
    - Обновление конфигурации Nginx: Вносит изменения в конфигурационные
файлы Nginx, если это необходимо для корректного функционирования
приложения в новой ветке.
    - Обновление конфигурации среды (`env`): Обновляет настройки окружения,
которые могут потребоваться для работы новой версии кода.
    - Обновление конфигурации сервиса: Вносит изменения в настройки
сервисов, чтобы они соответствовали новой версии приложения и обеспечивали
его корректное функционирование.

# Требования
%appdata%/Git Update Auto - путь до конфига localConf.json в котором указываются:</a>
- путь до каталога настроек nginx
- значения %PARAM%
- необходимость выполнять remove-bin-obj (true|false|null)
- необходимость удалять кэш nuget-пакетов (true|false|null)
- необходимость удалять node-modules (true|false|null)
- необходимость удалять package-lock (true|false|null)
- путь до кэша
- путь до используемых там утилит
Утилита при запуске читает настройки конфигурационного файла, источник бд для копирования, запрашивает конфигурации если указанно null.
Выполняет:
- вызов kill.ps1, ждет завершения
- параллельно на одном уровне иерархии списка:
    - вызов backup-and-restore.cmd
      - затем update-db %dbname%
    - очистка кэша nuget-пакетов (если выбрано)
      - затем восстановление кэша nuget-пакетов (если выбрано)
    - удаление node-modules и/или package-lock (если выбрано)
      - затем npm i (если выбрано)
- параллельно на одном уровне иерархии списка:
    - обновление nginx-конфигурации
    - обновление env-конфигурации
    - обновление ServiceConfiguration 
